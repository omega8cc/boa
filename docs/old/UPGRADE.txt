
###
### Notes on available BOA branches and licenses
###

 => BOA is available in three main branches, but only LTS for installation:

  * LTS which remains completely free to use without any kind of license
    as it was from the beginning (previously named HEAD or STABLE).
    This branch should be considered as BOA LTS with slow updates, focused
    on both security and bug fixes, but very limited new features additions.

  * DEV which requires paid license for both install and upgrade and includes
    the latest features, security and bug fixes and installed services versions.
    This branch shouldn't be used in production without extensive testing.

  * PRO which requires paid license and is available only as an upgrade
    from either LTS or DEV (or previous HEAD/STABLE) is the branch with regular
    monthly or bi-monthly releases, closely following tested DEV branch.

 => Once you install BOA LTS and want to upgrade to PRO with license obtained
    from https://omega8.cc/licenses you will need to replace up-lts in all
    examples below with up-pro

 => Once you install BOA LTS or PRO and want to upgrade to DEV with license
    from https://omega8.cc/licenses you will need to replace up-lts in all
    examples below with up-dev


###
### Important Notes for Standard/Manual BOA Upgrade
###

 => If you haven't run full barracuda+octopus upgrade to BOA Latest available
    Edition yet, don't use any partial upgrade modes explained further below.
    Once new BOA Latest is available, you must run *full* upgrades with commands:

    $ wget -qO- http://files.aegir.cc/BOA.sh.txt | bash
    $ barracuda up-lts
    $ barracuda up-lts system              (recommended on major upgrade)
    $ octopus up-lts all force
    $ bash /var/xdrago/manage_ltd_users.sh (recommended on major upgrade)
    $ bash /var/xdrago/daily.sh            (recommended on major upgrade)

    For silent, logged mode with email message sent once the upgrade is
    complete, but no progress is displayed in the terminal window, you can run
    alternatively, starting with screen session to avoid incomplete upgrade
    if your SSH session will be closed for any reason before the upgrade
    will complete:

    $ screen
    $ wget -qO- http://files.aegir.cc/BOA.sh.txt | bash
    $ barracuda up-lts log
    $ octopus up-lts all force log

    Note that the silent, non-interactive mode will automatically say Y/Yes
    to all prompts and is thus useful to run auto-upgrades scheduled in cron.

 => Don't run any installer via sudo.
    You must be logged in as root or `sudo -i` first.

 => All commands will honor settings in their respective config files:

    /root/.barracuda.cnf
    /root/.o1.octopus.cnf

    However, arguments specified on command line will take precedence - see
    upgrade modes explained below.


###
### Available Standard Upgrade Modes
###

    Download and run (as root) BOA Meta Installers first:

    $ wget -qO- http://files.aegir.cc/BOA.sh.txt | bash

 => To upgrade system and Aegir Master Instance to Latest use:

    $ barracuda up-lts

 => To upgrade selected Aegir Satellite Instance to Latest use:

    $ octopus up-lts o1 force

 => To upgrade *all* Aegir Satellite Instances to Latest use:

    $ octopus up-lts all force


###
### Available Custom Upgrade Modes
###

 => You can append "log" as the last argument to every command, and it will
    write the output to the file instead of to the console, respectively:

    /var/backups/reports/up/barracuda/*
    /var/backups/reports/up/octopus/*

    Examples:

    $ screen
    $ barracuda up-lts log
    $ octopus up-lts all force log

    Detailed backend log on barracuda upgrade is always stored in /var/backups/

 => You can append "system" as a last argument to the barracuda command, and
    it will upgrade only the system, without running Aegir Master Instance
    upgrade, plus it will write the output to the file instead of console:

    /var/backups/reports/up/barracuda/*

    Example:

    $ screen
    $ barracuda up-lts system

    Note that while both "log" and "system" modes are "silent", because they
    don't display anything in your console, they will send the log via email
    to your address specified in the config file: /root/.barracuda.cnf

    It is recommended that you start `screen` before running commands using
    the "silent" mode - to avoid confusion or incomplete tasks when your
    SSH connection drops for any reason.

 => It is possible to set/force the upgrade mode on the fly using optional
    arguments: {aegir|platforms|both}

    Note that none is similar to "both", however "both" will force aegir plus
    platforms upgrade, while none will honor also settings from the octopus
    instance cnf file, where currently only "aegir" mode is defined with
    _HM_ONLY=YES option.

    Examples:

    $ screen

    $ octopus up-lts o1 aegir
    $ octopus up-lts o1 platforms log
    $ octopus up-lts all aegir log
    $ octopus up-lts all platforms


###
### NOTE on Aegir platforms
###

 => Since BOA no longer installs all bundled Aegir platforms during Octopus
    installation and upgrades, you will need to add some keywords
    to ~/static/control/platforms.info and run Octopus upgrade to have
    these platforms added as explained in the docs you can find in the
    file ~/control/README.txt within your Octopus account.
